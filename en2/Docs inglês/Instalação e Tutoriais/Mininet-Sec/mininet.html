<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kytos Installation Tutorial</title>
    <link rel="stylesheet" href="mininet.css">
</head>
<body>

    <header>
        <div class="logo-group">
            <div class="logo">
                <img src="imagens/logo.PNG" alt="HackInSDN Logo">
            </div>
        </div>
        <nav>
            <ul>
                <li><a href="../../Index/index.html">Home</a></li>
                <li><a href="../../Tela_Sobre/sobre.html">About Us</a></li>
                <li><a href="../../Instalação e Tutoriais/tutorial.html">Tutorials</a></li>
                <li><a href="../../Blog/blog.html">Publications</a></li>
                <li><a href="../../https://dashboard.hackinsdn.ufba.br/login/" target="_blank">Portal</a></li>
            </ul>
        </nav>
    </header>

    <div class="container">

        <section class="tutorial-content">
            <h1>MININET-SEC ACTIVATION</h1>
            <p>If you encounter the error message “No module called Mininet” during the installation process, even with Mininet already installed on your system, you can execute the following commands to resolve the issue:</p>
            <pre><code>sudo -i
            cd ~
            git clone https://github.com/mininet/mininet.git
            export PYTHONPATH=$PYTHONPATH:$HOME/mininet</code></pre>
            <p>Kytos-ng is the SDN controller that will be used along with mnsec to create and manage connections between network components, as well as perform other functions. It can be activated in different ways. Each of the processes described below should be executed in separate terminals.</p>
            <p>⚠️ Steps 1 and 3 are not required if the user will use the topology defined in the firewall.py file. They are necessary to activate Kytos-ng to allow its use as a remote controller and establish connections between network components (NOS activation) in the case of using a custom topology.</p>
            
            <h2>1. Activate Kytos;</h2>
            <pre><code>source test_env/bin/activate
            cd teste
            cd kytos
            sudo ./docker/scripts/add-etc-hosts.sh
            export MONGO_USERNAME=mymongouser
            export MONGO_PASSWORD=mymongopass
            docker compose up -d
            docker ps
            kytosd -f --database mongodb</code></pre>
            
            <h2>2. Start mnsec;</h2>
            <p>It is important to use root mode when executing these commands. Mnsec can be used with predefined topologies, for example:</p>
            <pre><code>cd mininet-sec
            cd examples
            python3 firewall.py</code></pre>
            
            <p>In this topology, we have 3 internal hosts (h1, h2, h3), 1 external server (o1), 2 servers (srv1, srv2), 3 switches (s1, s2, nettap1), and a firewall (fw0).</p>
            <p>This is the established network:</p>
            <pre><code>fw0 fw0-eth0:s1-eth4 fw0-eth1:s2-eth3 fw0-eth2:nettap1-eth1
            h1 h1-eth0:s1-eth1
            h2 h2-eth0:s1-eth2
            h3 h3-eth0:s1-eth3
            o1 o1-eth0:nettap1-eth2
            srv1 srv1-eth0:s2-eth1
            srv2 srv2-eth0:s2-eth2</code></pre>
            
            <p>Nettap1 is a switch that promotes the connection between internal network components and the internet through the fw0-eth2 firewall interface. It also uses the nettap1-eth2 interface to connect with the host o1. In addition, there are interfaces that promote the firewall's connection to the internet:</p>
            <ul>
                <li>nettap1-ethmonA: Connection to the internet, facilitates traffic forwarding from the firewall to the internet.</li>
                <li>nettap1-ethmonB: Connection to the internet, facilitates traffic forwarding from the internet to the firewall.</li>
            </ul>
            
            <p>mnsec --topo linear,3 --apps h3:ssh:port=22,h3:http:port=80,h3:ldap,h3:smtp,h3:imap,h3:pop3 --controller=remote,ip=127.0.0.1</p>
            <p>In this case, we are creating a linear topology with 3 hosts (h1, h2, h3), and h3 has some important ports defined as open to test attacks.</p>
            
            <h2>3. NOS Activation;</h2>
            <pre><code>for sw in $(curl -s http://127.0.0.1:8181/api/kytos/topology/v3/switches | jq -r '.switches[].id'); do curl -H 'Content-type: application/json' -X POST http://127.0.0.1:8181/api/kytos/topology/v3/switches/$sw/enable; curl -H 'Content-type: application/json' -X POST http://127.0.0.1:8181/api/kytos/topology/v3/interfaces/switch/$sw/enable; done
        
            for l in $(curl -s http://127.0.0.1:8181/api/kytos/topology/v3/links | jq -r '.links[].id'); do curl -H 'Content-type: application/json' -X POST http://127.0.0.1:8181/api/kytos/topology/v3/links/$l/enable; done
        
            curl -H 'Content-type: application/json' -X POST http://127.0.0.1:8181/api/kytos/mef_eline/v2/evc/ -d '{"name": "my evc1", "dynamic_backup_path":'</code></pre>
        </section>
    </div>
</body>
</html>
