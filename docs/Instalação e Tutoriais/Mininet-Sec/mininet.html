<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutorial de Instalação do Kytos</title>
    <link rel="stylesheet" href="mininet.css">
</head>
<body>

    <header>
        <div class="logo-group">
            <div class="logo">
                <img src="imagens/logo.PNG" alt="HackInSDN Logo">
            </div>
        </div>
        <nav>
            <ul>
                <li><a href="../../Index/index.html">Home</a></li>
                <li><a href="../../Tela_Sobre/sobre.html">Quem Somos</a></li>
                <li><a href="../../Instalação e Tutoriais/tutorial.html">Tutoriais</a></li>
                <li><a href="../../Blog/blog.html">Publicações</a></li>
                <li><a href="../../https://dashboard.hackinsdn.ufba.br/login/" target="_blank">Portal</a></li>
            </ul>
        </nav>
    </header>

    <div class="container">

        <section class="tutorial-content">
            <h1>ATIVAÇÃO MININET-SEC</h1>
            <p>Se você receber a mensagem de erro “No module called Mininet” durante o processo de instalação, mesmo com o Mininet já instalado em seu sistema, você pode executar os seguintes comandos para resolver o problema:</p>
            <pre><code>sudo -i
            cd ~
            git clone https://github.com/mininet/mininet.git
            export PYTHONPATH=$PYTHONPATH:$HOME/mininet</code></pre>
            <p>O Kytos-ng é o controlador SDN que será usado junto com o mnsec para criar e gerenciar as conexões entre os componentes da rede, além de executar outras funções. Ele pode ser ativado de diferentes maneiras. Cada um dos processos descritos a seguir deve ser executado em janelas diferentes.</p>
            <p>⚠️ Os passos 1 e 3 não são necessários se o usuário vai usar a topologia definida no arquivo firewall.py. Eles são necessários para ativar o Kytos-ng, a fim de permitir seu uso como controlador remoto e estabelecer as conexões entre os componentes da rede (ativação do NOS), no caso de uso de uma topologia personalizada.</p>
            
            <h2>1. Ativar o Kytos;</h2>
            <pre><code>source test_env/bin/activate
            cd teste
            cd kytos
            sudo ./docker/scripts/add-etc-hosts.sh
            export MONGO_USERNAME=mymongouser
            export MONGO_PASSWORD=mymongopass
            docker compose up -d
            docker ps
            kytosd -f --database mongodb</code></pre>
            
            <h2>2. Iniciar o mnsec;</h2>
            <p>É importante usar o modo root ao executar esses comandos. O mnsec pode ser usado com topologias predefinidas, por exemplo:</p>
            <pre><code>cd mininet-sec
            cd examples
            python3 firewall.py</code></pre>
            
            <p>Nesta topologia, temos 3 hosts internos (h1, h2, h3), 1 servidor externo (o1), 2 servidores (srv1, srv2), 3 switches (s1, s2, nettap1) e a presença de um firewall (fw0).</p>
            <p>Esta é a rede estabelecida:</p>
            <pre><code>fw0 fw0-eth0:s1-eth4 fw0-eth1:s2-eth3 fw0-eth2:nettap1-eth1
            h1 h1-eth0:s1-eth1
            h2 h2-eth0:s1-eth2
            h3 h3-eth0:s1-eth3
            o1 o1-eth0:nettap1-eth2
            srv1 srv1-eth0:s2-eth1
            srv2 srv2-eth0:s2-eth2</code></pre>
            
            <p>O nettap1 é um switch que promove a conexão entre os componentes internos da rede e a internet, através da interface do firewall fw0-eth2. Ele também usa a interface nettap1-eth2 para se conectar com o host o1. Além disso, existem interfaces que promovem a conexão do firewall com a internet:</p>
            <ul>
                <li>nettap1-ethmonA: Conexão com a internet, promove o envio de tráfego do firewall para a internet.</li>
                <li>nettap1-ethmonB: Conexão com a internet, promove o envio de tráfego da internet para o firewall.</li>
            </ul>
            
            <p>mnsec --topo linear,3 --apps h3:ssh:port=22,h3:http:port=80,h3:ldap,h3:smtp,h3:imap,h3:pop3 --controller=remote,ip=127.0.0.1</p>
            <p>Neste caso, estamos criando uma topologia linear com 3 hosts (h1, h2, h3), e o h3 tem algumas portas importantes definidas como abertas, a fim de testar ataques.</p>
            
            <h2>3. Ativação do NOS;</h2>
            <pre><code>for sw in $(curl -s http://127.0.0.1:8181/api/kytos/topology/v3/switches | jq -r '.switches[].id'); do curl -H 'Content-type: application/json' -X POST http://127.0.0.1:8181/api/kytos/topology/v3/switches/$sw/enable; curl -H 'Content-type: application/json' -X POST http://127.0.0.1:8181/api/kytos/topology/v3/interfaces/switch/$sw/enable; done
        
            for l in $(curl -s http://127.0.0.1:8181/api/kytos/topology/v3/links | jq -r '.links[].id'); do curl -H 'Content-type: application/json' -X POST http://127.0.0.1:8181/api/kytos/topology/v3/links/$l/enable; done
        
            curl -H 'Content-type: application/json' -X POST http://127.0.0.1:8181/api/kytos/mef_eline/v2/evc/ -d '{"name": "my evc1", "dynamic_backup_path":'</code></pre>
        </section>
        

    </div>